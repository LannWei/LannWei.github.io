import{r as e,c as l,w as a,S as t,I as i,L as s,J as o,H as u,N as n,k as c,z as r,Z as d,o as v,K as p,Q as y,E as h,y as m,Y as b,G as w,R as g,_ as I,F as f,X as k,h as j,O as Z,n as M}from"./vendor-BlYIN2Q_.js";import{S as x}from"./SectionTitle-DGgJ2_38.js";import{_ as z,d as H}from"./index-B9tmYGsa.js";import{N as S,a as _,b as C,c as P,d as D,e as G,B as U}from"./naive-ui-CdBP3e5b.js";import"./utils-BgQMN3uK.js";/* empty css                                                                     */const W={class:"modal-content-container"},A={key:0,class:"modal-image-container"},B=["src"],N={key:1,class:"modal-video-container"},T={key:0,class:"video-loading"},L=["src"],V=z({__name:"ImageModal",props:{show:{type:Boolean,default:!1},imageSrc:{type:String,default:""},contentType:{type:String,default:"image"},youtubeUrl:{type:String,default:""}},emits:["update:show"],setup(v,{emit:p}){const y=v,h=p,m=e(!1),b=l({get:()=>y.show,set:e=>h("update:show",e)});function w(){setTimeout(()=>{m.value=!1},300)}a(()=>y.show,e=>{e&&"youtube"===y.contentType&&(m.value=!0)});const g=l(()=>{var e,l,a;if(!y.youtubeUrl)return"";let t="";return y.youtubeUrl.includes("youtube.com/watch?v=")?t=null==(e=y.youtubeUrl.split("v=")[1])?void 0:e.split("&")[0]:y.youtubeUrl.includes("youtu.be/")?t=null==(l=y.youtubeUrl.split("youtu.be/")[1])?void 0:l.split("?")[0]:y.youtubeUrl.includes("youtube.com/embed/")&&(t=null==(a=y.youtubeUrl.split("embed/")[1])?void 0:a.split("?")[0]),t?`https://www.youtube.com/embed/${t}?autoplay=1&rel=0&showinfo=0&modestbranding=1`:""});return(e,l)=>(i(),t(d(S),{show:b.value,"onUpdate:show":l[0]||(l[0]=e=>b.value=e),preset:"card",style:{width:"90vw","max-width":"800px"}},{default:s(()=>[o("div",W,["image"===v.contentType?(i(),u("div",A,[o("img",{src:v.imageSrc,class:"modal-image",alt:"enlarged image"},null,8,B)])):n("",!0),"youtube"===v.contentType?(i(),u("div",N,[m.value?(i(),u("div",T,[...l[1]||(l[1]=[o("div",{class:"loading-spinner"},[o("svg",{class:"spinner",viewBox:"0 0 50 50"},[o("circle",{class:"path",cx:"25",cy:"25",r:"20",fill:"none",stroke:"#FF0000","stroke-width":"3","stroke-linecap":"round","stroke-dasharray":"31.416","stroke-dashoffset":"31.416"})])],-1),o("div",{class:"loading-text"},"加载视频中...",-1)])])):n("",!0),c(o("iframe",{src:g.value,class:"modal-video",frameborder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowfullscreen:"",onLoad:w},null,40,L),[[r,!m.value]])])):n("",!0)])]),_:1},8,["show"]))}},[["__scopeId","data-v-9467a71b"]]);function Y(e){if(!e||0===Object.keys(e).length)return null;const l=["PDF","Code","Project","DOI"];let a=null;for(const t of l){if(a)return a;a=e.filter(e=>e.type===t)[0]}return e[0]}const Q={},J=["innerHTML"],R={key:0,class:"keyword-filter"},E={class:"badge-accent"},F={class:"badge-text"},O={key:1,class:"info-block"},X={class:"info-text"},$={class:"filters-container"},q={class:"filter-row"},K={class:"video-filter"},ee={class:"switch-track"},le={class:"switch-text"},ae={class:"year-filter"},te={key:2,class:"no-results"},ie={class:"pub-header align-both"},se={class:"pub-title"},oe={class:"pub-authors"},ue={class:"pub-meta"},ne={class:"pub-venue"},ce={class:"pub-year"},re={class:"pub-section"},de={class:"pub-keywords"},ve={class:"pub-links"},pe=["onClick"],ye=["alt"],he={class:"video-play-overlay"},me={key:0,class:"play-icon",viewBox:"0 0 24 24",fill:"white"},be={key:1,class:"play-icon",viewBox:"0 0 24 24",fill:"currentColor"},we={key:0,class:"video-duration-badge"},ge={class:"stats"},Ie=z({__name:"Publications",setup(a){const r=g(),z=b(),S=e({}),W=e([]),A=e("all"),B=e("all"),N=e([]),T=e(0),L=e(""),Ie=l(()=>r.query.keyword||""),fe=l(()=>Ie.value?Ie.value.split(",").map(e=>e.trim()).filter(Boolean):[]),ke=e(!1),je=e(""),Ze=l(()=>Q.researchareas||[]),Me=l(()=>{if(!fe.value.length)return"";const e=Ze.value.find(e=>e.keywords&&e.keywords.some(e=>fe.value.includes(e)));return e?e.intro:""}),xe=l(()=>W.value.filter(e=>e.videoId).length),ze=l(()=>{const e=[{label:"All Years",value:"all"}];return N.value.forEach(l=>{e.push({label:l,value:l})}),e}),He=l(()=>{let e=W.value;return fe.value.length>0&&(e=e.filter(e=>e.keywords&&e.keywords.some(e=>fe.value.includes(e)))),"video"===B.value&&(e=e.filter(e=>e.videoId)),"all"===A.value?e:e.filter(e=>e.year===A.value)});function Se(){z.push({path:"/publications"})}function _e(){0!==xe.value&&(B.value="all"===B.value?"video":"all")}let Ce="youtube";function Pe(e){let l=e.toLowerCase();return!!(l.includes("png")||l.includes("jpg")||l.includes("jpeg")||l.includes("gif"))}const De=l(()=>0===He.value.length?null:Y(He.value[0].links));function Ge(e){e&&window.open(e,"_blank")}return l(()=>{if(0===He.value.length)return[];const e=He.value[0].links,l=De.value;return l?Object.entries(e).filter(([e,a])=>e!==l.type).map(([e,l])=>({type:e,url:l})):Object.entries(e).map(([e,l])=>({type:e,url:l}))}),v(()=>{!async function(){try{const l=await H.getData("/data/publications-content.json");S.value=l.metadata||{},W.value=(l.sections||[]).filter(e=>e.title&&"# Publications"!==e.title).map(e=>({title:e.title,authors:Array.isArray(e.authors)?e.authors.join(", "):e.authors,year:e.year,venue:e.venue,section:e.type,keywords:e.keywords||[],links:e.links,videoId:e.videoId||null,thumbnailUrl:e.thumbnailUrl||null,videoDuration:e.videoDuration||null})),N.value=[...new Set(W.value.map(e=>e.year))].sort((e,l)=>l-e),T.value=W.value.length,L.value=(e=l.lastUpdated)?new Date(e).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}):""}catch(l){W.value=[]}var e}()}),(e,l)=>{const a=w("n-empty"),r=I("lazyload");return i(),u("section",null,[p(x,{title:"Selected Publications"}),o("div",{class:"section-description",innerHTML:S.value.description},null,8,J),fe.value.length>0?(i(),u("div",R,[o("div",E,[o("span",F,"Filtered by: "+y(fe.value.join(", ")),1),o("button",{class:"btn-clear",onClick:Se},[...l[2]||(l[2]=[o("span",{class:"clear-icon"},"×",-1)])])])])):n("",!0),fe.value.length>0&&Me.value?(i(),u("div",O,[l[3]||(l[3]=o("div",{class:"info-title"},"About this research area",-1)),o("div",X,y(Me.value),1)])):n("",!0),o("div",$,[o("div",q,[o("div",K,[o("div",{class:h(["custom-switch",{active:"video"===B.value,disabled:0===xe.value}]),onClick:_e},[o("div",ee,[l[4]||(l[4]=o("div",{class:"switch-thumb"},null,-1)),o("span",le,y("video"===B.value?`Hightlight (${xe.value})`:"All Papers"),1)])],2)]),o("div",ae,[p(d(_),{value:A.value,"onUpdate:value":l[0]||(l[0]=e=>A.value=e),options:ze.value,size:"medium",placeholder:"All Years"},null,8,["value","options"])])])]),0===He.value.length?(i(),u("div",te,[p(a,{description:"No publications found matching the current filters"},{icon:s(()=>[p(d(P),{size:"48"},{default:s(()=>[...l[5]||(l[5]=[o("svg",{viewBox:"0 0 24 24",fill:"currentColor"},[o("path",{d:"M9 11H7v2h2v-2zm4 0h-2v2h2v-2zm4 0h-2v2h2v-2zm2-7h-1V2h-2v2H8V2H6v2H5c-1.11 0-1.99.9-1.99 2L3 20c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 16H5V9h14v11z"})],-1)])]),_:1})]),_:1})])):n("",!0),p(m,{name:"pub-list-fade",tag:"div",class:"pub-list-group"},{default:s(()=>[(i(!0),u(f,null,k(He.value,e=>(i(),t(d(D),{key:e.title,hoverable:"",class:"publication-card",onClick:l=>function(e){const l=Y(e.links);l&&Ge(l.url)}(e)},{default:s(()=>{return[o("div",ie,[o("div",se,y(e.title),1),o("div",oe,y(e.authors),1)]),o("div",ue,[o("span",ne,y(e.venue),1),o("span",ce,y(e.year),1),o("span",re,y(e.section),1)]),o("div",de,[(i(!0),u(f,null,k(e.keywords,e=>(i(),t(d(G),{key:e,size:"small",type:"success",class:"keyword-tag"},{default:s(()=>[j(y(e),1)]),_:2},1024))),128))]),o("div",ve,[(i(!0),u(f,null,k(e.links,e=>(i(),t(d(U),{key:e.type,type:"PDF"===e.type?"primary":"default",size:"small",onClick:Z(l=>Ge(e.url),["stop"])},{default:s(()=>[j(y(e.type),1)]),_:2},1032,["type","onClick"]))),128))]),e.videoId?(i(),u("div",{key:0,class:"video-thumbnail-container",title:"Watch Video",onClick:Z(l=>function(e){e.videoId&&(je.value=Pe(e.videoId)?e.videoId:"https://www.youtube.com/watch?v="+e.videoId,Ce=Pe(e.videoId)?"image":"youtube",M(()=>{ke.value=!0}))}(e),["stop"])},[c(o("img",{src:"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjExIiBoZWlnaHQ9IjExNSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48ZGVmcz48bGluZWFyR3JhZGllbnQgaWQ9ImciIHgxPSIwJSIgeTE9IjAlIiB4Mj0iMTAwJSIgeTI9IjEwMCUiPjxzdG9wIG9mZnNldD0iMCUiIHN0b3AtY29sb3I9IiNmNWY1ZjUiLz48c3RvcCBvZmZzZXQ9IjEwMCUiIHN0b3AtY29sb3I9IiNlZGVkZWQiLz48L2xpbmVhckdyYWRpZW50PjwvZGVmcz48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSJ1cmwoI2cpIiByeD0iOCIvPjx0ZXh0IHg9IjEwNS41IiB5PSI2Mi41IiBmb250LWZhbWlseT0iQXJpYWwsIHNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGZvbnQtd2VpZ2h0PSI1MDAiIHRleHQtYW5jaG9yPSJtaWRkbGUiIGZpbGw9InJnYmEoMCwwLDAsMC42KSI+TG9hZGluZy4uLjwvdGV4dD48L3N2Zz4=",class:"video-thumbnail",alt:e.title+" video thumbnail"},null,8,ye),[[r,e.thumbnailUrl||(a=e.videoId,Pe(a)?a:a?`https://img.youtube.com/vi/${a}/hqdefault.jpg`:"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTIwIiBoZWlnaHQ9IjY4IiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPjxyZWN0IHdpZHRoPSIxMDAlIiBoZWlnaHQ9IjEwMCUiIGZpbGw9IiNmMGYwZjAiLz48cGF0aCBkPSJNNDAgMjZsMTYgOC0xNiA4eiIgZmlsbD0iI2NjYyIvPjwvc3ZnPg==")]]),o("div",he,[Pe(e.videoId)?(i(),u("svg",me,[...l[6]||(l[6]=[o("path",{d:"M7 3H3v4h2V5h2V3zm14 0h-4v2h2v2h2V3zm0 14h-2v2h-2v2h4v-4zm-14 4v-2H5v-2H3v4h4z"},null,-1)])])):(i(),u("svg",be,[...l[7]||(l[7]=[o("path",{d:"M8 5v14l11-7z"},null,-1)])]))]),e.videoDuration?(i(),u("div",we,y(e.videoDuration),1)):n("",!0)],8,pe)):n("",!0)];var a}),_:2},1032,["onClick"]))),128))]),_:1}),o("div",ge,[p(d(C),{label:"Total Publications",value:He.value.length},null,8,["value"]),p(d(C),{label:"Years Covered",value:N.value.length},null,8,["value"]),p(d(C),{label:"Papers with Video",value:xe.value},null,8,["value"])]),p(V,{show:ke.value,"onUpdate:show":l[1]||(l[1]=e=>ke.value=e),"content-type":d(Ce),"youtube-url":je.value,"image-src":je.value},null,8,["show","content-type","youtube-url","image-src"])])}}},[["__scopeId","data-v-8c1db72d"]]);export{Ie as default};
